!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[435],{26435:function(t,i,o){"use strict";o.r(i),o.d(i,{HomeModule:function(){return G}});var a=o(61116),s=o(2937),u=o(31041),c=o(63337),l=o(56967),f=o(31431),p=o(92935),g=o(59472),v=o(47701),d=o(98720),m=o(66599),h=o(35366),x=o(59411),Z=o(730),y=o(3492),F=o(38611),k=o(35965),A=o(13070),b=o(9550),w=o(13841),q=o(87064),T=o(26470),C=o(84369);function _(e,t){if(1&e&&(h.TgZ(0,"mat-option",8),h._uU(1),h.qZA()),2&e){var r=t.$implicit;h.Q6J("value",r),h.xp6(1),h.hij(" ",r," ")}}function J(e,t){if(1&e&&(h.TgZ(0,"mat-option",8),h._uU(1),h.qZA()),2&e){var r=t.$implicit,n=h.oxw();h.Q6J("value",r),h.xp6(1),h.hij(" ",n.genreName[r]," ")}}function S(e,t){1&e&&(h.TgZ(0,"div",12),h._uU(1,"Searching...."),h.qZA())}function U(e,t){if(1&e&&(h.TgZ(0,"span",29),h._uU(1),h.qZA()),2&e){var r=t.$implicit,n=h.oxw(3);h.xp6(1),h.Oqu(n.genreName[r])}}function B(e,t){if(1&e&&(h.TgZ(0,"div",1),h.YNc(1,U,2,1,"span",28),h.qZA()),2&e){var r=h.oxw().$implicit;h.xp6(1),h.Q6J("ngForOf",r.genre)}}function M(e,t){if(1&e){var r=h.EpF();h.TgZ(0,"button",30),h.NdJ("click",function(){h.CHM(r);var e=h.oxw().$implicit;return h.oxw().addToFavourites(e)}),h._uU(1," Add to Favourites "),h.qZA()}}function Y(e,t){if(1&e){var r=h.EpF();h.TgZ(0,"button",31),h.NdJ("click",function(){h.CHM(r);var e=h.oxw().$implicit;return h.oxw().removeFromFavourites(e)}),h._uU(1," Remove from Favourites "),h.qZA()}}function N(e,t){if(1&e){var r=h.EpF();h.ynx(0),h.TgZ(1,"div",13),h.TgZ(2,"div",14),h.TgZ(3,"div",1),h.TgZ(4,"app-photo-preview",15),h.NdJ("click",function(){var e=h.CHM(r).$implicit;return h.oxw().showMovieDetails(e)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(5,"div",16),h.TgZ(6,"div",17),h.TgZ(7,"div",18),h.NdJ("click",function(){var e=h.CHM(r).$implicit;return h.oxw().showMovieDetails(e)}),h._uU(8," Name: "),h.TgZ(9,"span",19),h._uU(10),h.qZA(),h.qZA(),h.TgZ(11,"div",1),h._uU(12,"Year: "),h.TgZ(13,"span",19),h._uU(14),h.qZA(),h.qZA(),h.qZA(),h.TgZ(15,"div",20),h.TgZ(16,"div",21),h._uU(17,"Rating:"),h.qZA(),h.TgZ(18,"div",22),h.TgZ(19,"span"),h._uU(20),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(21,"div",23),h.YNc(22,B,2,1,"div",24),h.qZA(),h.TgZ(23,"div",25),h.YNc(24,M,2,0,"button",26),h.YNc(25,Y,2,0,"button",27),h.qZA(),h.qZA(),h.BQk()}if(2&e){var n=t.$implicit;h.xp6(4),h.Q6J("size","40px")("photoURL",n.posterURL),h.xp6(6),h.Oqu(n.name),h.xp6(4),h.Oqu(n.year),h.xp6(6),h.Oqu(n.rating),h.xp6(2),h.Q6J("ngIf",n.genre.length),h.xp6(2),h.Q6J("ngIf",!n.isFavourite),h.xp6(1),h.Q6J("ngIf",n.isFavourite)}}var O,I,Q=[{path:"",component:(O=function(){function t(e,n,i,o,a,s){var u=this;r(this,t),this.dialog=e,this.usersService=n,this.cdr=i,this.stateService=o,this.toastr=a,this.apiService=s,this.movies=[],this.favourites=[],this.sortBy="name",this.loading=!1,this.readFavourites(),this.fetchGenres(),this.moviesSubscription=this.stateService.getUser().subscribe(function(e){e&&e.id?(u.activeUser=e,u.cdr.markForCheck()):(u.activeUser={},u.cdr.markForCheck())})}var i,o,a;return i=t,(o=[{key:"movieYears",get:function(){return e(new Set(this.movies.map(function(e){return e.year}))).sort(function(e,t){return t-e})}},{key:"movieGenres",get:function(){var t=this.flatten(this.movies.map(function(e){return e.genre}));return e(new Set(t))}},{key:"sortedAndFilteredMovies",get:function(){var t=this,r=e(this.movies);return this.filterByYear&&(r=e(r.filter(function(e){return e.year===t.filterByYear}))),this.filterByGenre&&(r=e(r.filter(function(e){return e.genre.includes(t.filterByGenre)}))),r}},{key:"favouriteMoviesIDs",get:function(){return this.favourites&&this.favourites.length?this.favourites.map(function(e){return e.id}):[]}},{key:"ngOnInit",value:function(){var e=this;this.searchField=new u.NI,this.searchField.valueChanges.pipe((0,v.b)(600),(0,d.x)(),(0,m.b)(function(t){e.loading=!0}),(0,m.b)(function(t){return e.loading=!1})).subscribe(function(t){e.apiService.search(t).subscribe(function(t){var r;e.movies=[],t.results.forEach(function(t){r={name:t.original_title,year:t.release_date?t.release_date.split("-")[0]:"-",genre:t.genre_ids,rating:t.vote_average,posterURL:t.poster_path?"https://image.tmdb.org/t/p/w440_and_h660_face"+t.poster_path:"https://www.allianceplast.com/wp-content/uploads/2017/11/no-image.png",description:t.overview,id:t.id,isFavourite:e.favouriteMoviesIDs.includes(t.id)},e.movies.push(r)}),e.doSort(),e.cdr.markForCheck()})})}},{key:"fetchGenres",value:function(){var e=this;this.apiService.getGenres().subscribe(function(t){e.genreName=t.genres.reduce(function(e,t){return e[t.id]=t.name,e},{})})}},{key:"readFavourites",value:function(){var e=localStorage.getItem("favourites");if(e){var t=JSON.parse(e);t&&(this.favourites=t,this.cdr.markForCheck())}}},{key:"showMovieDetails",value:function(e){var t=this,r=new p.vA;r.width="500px",r.hasBackdrop=!0,r.closeOnNavigation=!0;var n=this.dialog.open(g.F,r);n.componentInstance.movie=e,n.afterClosed().subscribe(function(e){e&&t.cdr.markForCheck()})}},{key:"updateSort",value:function(){this.doSort(),this.cdr.markForCheck()}},{key:"doSort",value:function(){"year"===this.sortBy?this.movies.sort(function(e,t){return t.year-e.year}):"name"===this.sortBy&&this.movies.sort(function(e,t){return e.name.localeCompare(t.name)}),this.cdr.markForCheck()}},{key:"addToFavourites",value:function(e){e.isFavourite=!0;var t=this.movies.filter(function(e){return e.isFavourite});localStorage.setItem("favourites",JSON.stringify(t)),this.cdr.markForCheck()}},{key:"removeFromFavourites",value:function(e){e.isFavourite=!1;var t=this.movies.filter(function(e){return e.isFavourite});localStorage.setItem("favourites",JSON.stringify(t)),this.cdr.markForCheck()}},{key:"doYearFilter",value:function(){0===this.filterByYear&&(this.filterByYear=null,this.cdr.markForCheck())}},{key:"doGenreFilter",value:function(){0===this.filterByGenre&&(this.filterByGenre=null,this.cdr.markForCheck())}},{key:"flatten",value:function(e){var t=this;return e.reduce(function(e,r){return e.concat(Array.isArray(r)?t.flatten(r):r)},[])}}])&&n(i.prototype,o),a&&n(i,a),t}(),O.\u0275fac=function(e){return new(e||O)(h.Y36(p.uw),h.Y36(x.K),h.Y36(h.sBO),h.Y36(Z.b),h.Y36(y._W),h.Y36(F.s))},O.\u0275cmp=h.Xpm({type:O,selectors:[["app-home"]],decls:37,vars:12,consts:[["fxFlex","100","fxLayout","row wrap",1,"home-page"],["fxFlex","100"],["appearance","outline",1,"form-field"],["matInput","",3,"formControl"],["searchInput",""],["appearance","outline",1,"btr-form-field"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","searching","fxFlex","100",4,"ngIf"],["fxLayout","row wrap","fxLayoutGap","10px","fxFlex","100",1,"movies-container"],[4,"ngFor","ngForOf"],["fxFlex","100",1,"searching"],["fxFlex","1 1 24","fxFlex.lt-lg","0 1 48","fxFlex.lt-sm","0 1 95","fxLayout","row wrap",1,"movie"],["fxFlex","calc(50px)"],[3,"size","photoURL","click"],["fxFlex","calc(100%-50px)","fxLayout","row wrap"],["fxFlex","calc(100%-60px)","fxLayout","row wrap","fxLayoutAlign","start start",1,"user-info"],["fxFlex","100",1,"pointer",3,"click"],[1,"bold"],["fxFlex","calc(60px)","fxLayout","row wrap","fxLayoutAlign","center start",1,"skill-wrapper"],["fxFlex","100",1,"skill-label","text-center"],["fxFlex","100",1,"skill-rating","text-center","pointer"],["fxFlex","100","fxLayoutAlign","start center"],["fxFlex","100",4,"ngIf"],["fxFlex","100","fxLayoutAlign","center center"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["class","genre-token",4,"ngFor","ngForOf"],[1,"genre-token"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"h2",1),h._uU(2,"Movie DB"),h.qZA(),h.TgZ(3,"span"),h.TgZ(4,"mat-form-field",2),h.TgZ(5,"mat-label"),h._uU(6,"Search Movies"),h.qZA(),h._UZ(7,"input",3,4),h.qZA(),h.qZA(),h.TgZ(9,"span"),h.TgZ(10,"mat-form-field",5),h.TgZ(11,"mat-label"),h._uU(12,"Filter By Year"),h.qZA(),h.TgZ(13,"mat-select",6),h.NdJ("ngModelChange",function(e){return t.filterByYear=e})("selectionChange",function(){return t.doYearFilter()}),h.YNc(14,_,2,2,"mat-option",7),h.TgZ(15,"mat-option",8),h._uU(16," Clear Filter "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"span"),h.TgZ(18,"mat-form-field",5),h.TgZ(19,"mat-label"),h._uU(20,"Filter By Genre"),h.qZA(),h.TgZ(21,"mat-select",6),h.NdJ("ngModelChange",function(e){return t.filterByGenre=e})("selectionChange",function(){return t.doGenreFilter()}),h.YNc(22,J,2,2,"mat-option",7),h.TgZ(23,"mat-option",8),h._uU(24," Clear Filter "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(25,"span"),h.TgZ(26,"mat-form-field",5),h.TgZ(27,"mat-label"),h._uU(28,"Sorty By"),h.qZA(),h.TgZ(29,"mat-select",6),h.NdJ("ngModelChange",function(e){return t.sortBy=e})("selectionChange",function(){return t.updateSort()}),h.TgZ(30,"mat-option",8),h._uU(31," Sort by Year "),h.qZA(),h.TgZ(32,"mat-option",8),h._uU(33," Sort by Name "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(34,S,2,0,"div",9),h.TgZ(35,"div",10),h.YNc(36,N,26,8,"ng-container",11),h.qZA(),h.qZA()),2&e&&(h.xp6(7),h.Q6J("formControl",t.searchField),h.xp6(6),h.Q6J("ngModel",t.filterByYear),h.xp6(1),h.Q6J("ngForOf",t.movieYears),h.xp6(1),h.Q6J("value",0),h.xp6(6),h.Q6J("ngModel",t.filterByGenre),h.xp6(1),h.Q6J("ngForOf",t.movieGenres),h.xp6(1),h.Q6J("value",0),h.xp6(6),h.Q6J("ngModel",t.sortBy),h.xp6(1),h.Q6J("value","year"),h.xp6(2),h.Q6J("value","name"),h.xp6(2),h.Q6J("ngIf",t.loading),h.xp6(2),h.Q6J("ngForOf",t.sortedAndFilteredMovies))},directives:[k.yH,k.xw,A.KE,A.hX,b.Nt,u.Fj,u.JJ,u.oH,w.gD,u.On,a.sg,q.ey,a.O5,k.SQ,T.g,k.Wh,C.lW],styles:[".movie[_ngcontent-%COMP%]{border:1px solid #673ab7;border-radius:5px;padding:15px 10px;margin-bottom:10px;min-width:250px}.home-page[_ngcontent-%COMP%]{padding:10px 20px}.skill-rating[_ngcontent-%COMP%]{font-weight:700;font-size:30px;border:1px solid;border-radius:10px;padding:10px 5px;line-height:35px;background-color:#000;color:#fff;max-height:55px}.genre-token[_ngcontent-%COMP%]{margin:3px;padding:3px 5px;border:1px solid #673ab7;border-radius:5px;background-color:#673ab7;color:#fff;font-size:10px;font-weight:700;display:inline-block}"],changeDetection:0}),O)}],G=((I=function e(){r(this,e)}).\u0275fac=function(e){return new(e||I)},I.\u0275mod=h.oAB({type:I}),I.\u0275inj=h.cJS({providers:[],imports:[[a.ez,c.Bz,s.o9,u.u5,f.q,l.y,u.UX,c.Bz.forChild(Q)]]}),I)}}])}();